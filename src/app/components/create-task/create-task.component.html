<ng-container *ngIf="categories$ | async as categories; else loader">
  <ng-container *ngIf="categories.length > 0; else noTasks">
    <form
      [formGroup]="createTaskForm"
      (ngSubmit)="onCreateTaskFormSubmitted(createTaskForm)"
    >
      <div>
        <mat-form-field appearance="outline"
          ><mat-label>Name</mat-label
          ><input
            matInput
            type="text"
            placeholder="Name"
            formControlName="name"
            required
          /><mat-error *ngIf="createTaskForm.get('name')!.errors?.required"
            >Name is required</mat-error
          >
          <mat-error *ngIf="createTaskForm.get('name')!.errors?.pattern"
            >Please use letters only</mat-error
          >
        </mat-form-field>
      </div>

      <div>
        <mat-form-field appearance="outline" class="h-16">
          <mat-label>Choose an option</mat-label>
          <mat-select
            formControlName="category"
            [compareWith]="compareCategories"
          >
            <mat-option
              *ngFor="let category of categories"
              [value]="category.id"
              [disabled]="
                compareCategories(currentlySelectedCategory, category)
              "
            >
              {{ category.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <mat-error
        *ngIf="
          createTaskForm.get('category')!.errors?.required &&
          createTaskForm.get('category')!.touched
        "
        >Category is required</mat-error
      >

      <button
        type="submit"
        mat-raised-button
        color="primary"
        class="mt-5"
        [disabled]="!createTaskForm.valid"
      >
        Create
      </button>
    </form>
  </ng-container>
</ng-container>

<ng-template #loader>
  <mat-progress-spinner
    [color]="'primary'"
    [mode]="'indeterminate'"
    [value]="50"
  >
  </mat-progress-spinner>
</ng-template>

<ng-template #noTasks>
  <div
    class="border-2 border-solid border-slate-200 p-4 m-10 flex flex-col items-center justify-items-center"
  >
    Sorry, there are no tasks in this category
  </div>
</ng-template>
